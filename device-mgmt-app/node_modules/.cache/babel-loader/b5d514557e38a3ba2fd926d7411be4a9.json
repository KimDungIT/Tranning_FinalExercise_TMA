{"ast":null,"code":"import _defineProperty from\"/home/nktoan/ndung/device-mgmt/device-mgmt-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/nktoan/ndung/device-mgmt/device-mgmt-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/nktoan/ndung/device-mgmt/device-mgmt-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/nktoan/ndung/device-mgmt/device-mgmt-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/nktoan/ndung/device-mgmt/device-mgmt-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/nktoan/ndung/device-mgmt/device-mgmt-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import TextField from\"@material-ui/core/TextField\";import Dialog from\"@material-ui/core/Dialog\";import DialogActions from\"@material-ui/core/DialogActions\";import DialogContent from\"@material-ui/core/DialogContent\";import DialogTitle from\"@material-ui/core/DialogTitle\";import Button from\"@material-ui/core/Button\";import MenuItem from\"@material-ui/core/MenuItem\";import callApi from\"../util/ApiCaller\";import{notification}from\"antd\";import\"antd/dist/antd.css\";var DialogEdit=/*#__PURE__*/function(_Component){_inherits(DialogEdit,_Component);var _super=_createSuper(DialogEdit);function DialogEdit(props){var _this;_classCallCheck(this,DialogEdit);_this=_super.call(this,props);_this.changeName=function(){var result=\"\";var columnName=_this.props.columnName;switch(columnName){case\"hardwareType\":result=\"hardware type\";break;case\"interfaceVersion\":result=\"interface version\";break;case\"connectionMechanism\":result=\"connection mechanism\";break;default:break;}return result;};_this.label={hardwareType:\"Hardware type\",interfaceVersion:\"Interface version\",connectionMechanism:\"Connection mechanism\"};_this.renderField=function(){var columnName=_this.props.columnName;var connectionMechanismList=[{value:\"Call home\"},{value:\"Non Callhome\"}];var result=/*#__PURE__*/React.createElement(React.Fragment,null,\" \");if(!columnName){return result;}switch(columnName){case\"connectionMechanism\":result=/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(TextField,{id:\"connectionMechanism\",select:true,label:\"Connection mechanism\",name:\"connectionMechanism\",value:_this.state.deviceInfo[columnName],onChange:_this.onChangeDiviceInfo,required:true,fullWidth:true},connectionMechanismList.map(function(option){return/*#__PURE__*/React.createElement(MenuItem,{key:option.value,value:option.value},option.value);})));break;default:result=/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(TextField,{margin:\"dense\",name:columnName,label:_this.label[columnName],fullWidth:true,required:true,onChange:_this.onChangeDiviceInfo,value:_this.state.deviceInfo[columnName]}));break;}return result;};_this.handleSubmit=function(e){e.preventDefault();var _this$state$deviceInf=_this.state.deviceInfo,name=_this$state$deviceInf.name,hardwareType=_this$state$deviceInf.hardwareType,interfaceVersion=_this$state$deviceInf.interfaceVersion,connectionMechanism=_this$state$deviceInf.connectionMechanism,deviceHolderName=_this$state$deviceInf.deviceHolderName;var deviceInfo={name:name,hardwareType:hardwareType,interfaceVersion:interfaceVersion,connectionMechanism:connectionMechanism,deviceHolderName:deviceHolderName};console.log(\"connectionMechanism: \",deviceInfo);if(_this.validateInput(deviceInfo)){notification.error({message:\"Error \",description:\"Can not edit device\"});return;}callApi(\"device/\".concat(_this.props.deviceInfo.name),\"PUT\",deviceInfo).then(function(res){if(res.status===200){notification.success({message:\"Success\",description:\"Edit device successfully!\"});_this.props.setNeedRefreshDevice(true);}}).catch(function(error){notification.error({message:\"Error \",description:error.message});});};_this.validateInput=function(device){var valid=false;//check empty string\nif(device.hardwareType===\"\"){valid=true;}if(device.interfaceVersion===\"\"){valid=true;}if(device.connectionMechanism===\"\"){valid=true;}return valid;};_this.onChangeDiviceInfo=function(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;console.log(\"name: \",name);_this.setState(function(prevState){return{deviceInfo:_objectSpread({},prevState.deviceInfo,_defineProperty({},name,value))};});};_this.state={deviceInfo:{}};return _this;}_createClass(DialogEdit,[{key:\"componentDidMount\",value:function componentDidMount(){this.setState({deviceInfo:this.props.deviceInfo});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){if(JSON.stringify(this.props.deviceInfo)!==JSON.stringify(prevProps.deviceInfo)){this.setState({deviceInfo:this.props.deviceInfo});}}},{key:\"render\",value:function render(){var renderField=this.renderField();var name=this.changeName();return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Dialog,{open:this.props.openDialog,onClose:this.props.onCloseDialog,\"aria-labelledby\":\"form-dialog-title\"},/*#__PURE__*/React.createElement(DialogTitle,{id:\"form-dialog-title\"},\"Edit \",name),/*#__PURE__*/React.createElement(DialogContent,null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit,noValidate:true,autoComplete:\"off\"},renderField,/*#__PURE__*/React.createElement(DialogActions,null,/*#__PURE__*/React.createElement(Button,{onClick:this.props.onCloseDialog,color:\"primary\"},\"Cancel\"),/*#__PURE__*/React.createElement(Button,{onClick:this.props.onCloseDialog,variant:\"contained\",type:\"submit\",color:\"primary\"},\"Save\"))))));}}]);return DialogEdit;}(Component);export default DialogEdit;","map":{"version":3,"sources":["/home/nktoan/ndung/device-mgmt/device-mgmt-app/src/components/DialogEdit.js"],"names":["React","Component","TextField","Dialog","DialogActions","DialogContent","DialogTitle","Button","MenuItem","callApi","notification","DialogEdit","props","changeName","result","columnName","label","hardwareType","interfaceVersion","connectionMechanism","renderField","connectionMechanismList","value","state","deviceInfo","onChangeDiviceInfo","map","option","handleSubmit","e","preventDefault","name","deviceHolderName","console","log","validateInput","error","message","description","then","res","status","success","setNeedRefreshDevice","catch","device","valid","event","target","setState","prevState","prevProps","JSON","stringify","openDialog","onCloseDialog"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Button from \"@material-ui/core/Button\";\r\n\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport callApi from \"../util/ApiCaller\";\r\nimport { notification } from \"antd\";\r\nimport \"antd/dist/antd.css\";\r\n\r\nclass DialogEdit extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      deviceInfo: {},\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setState({ deviceInfo: this.props.deviceInfo });\r\n  }\r\n\r\n  changeName = () => {\r\n    let result = \"\";\r\n    const { columnName } = this.props;\r\n    switch (columnName) {\r\n      case \"hardwareType\":\r\n        result = \"hardware type\";\r\n        break;\r\n      case \"interfaceVersion\":\r\n        result = \"interface version\";\r\n        break;\r\n      case \"connectionMechanism\":\r\n        result = \"connection mechanism\";\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    return result;\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (\r\n      JSON.stringify(this.props.deviceInfo) !==\r\n      JSON.stringify(prevProps.deviceInfo)\r\n    ) {\r\n      this.setState({ deviceInfo: this.props.deviceInfo });\r\n    }\r\n  }\r\n\r\n  label = {\r\n    hardwareType: \"Hardware type\",\r\n    interfaceVersion: \"Interface version\",\r\n    connectionMechanism: \"Connection mechanism\",\r\n  };\r\n\r\n  renderField = () => {\r\n    const { columnName } = this.props;\r\n    const connectionMechanismList = [\r\n      { value: \"Call home\" },\r\n      { value: \"Non Callhome\" },\r\n    ];\r\n    let result = <> </>;\r\n    if (!columnName) {\r\n      return result;\r\n    }\r\n    switch (columnName) {\r\n      case \"connectionMechanism\":\r\n        result = (\r\n          <>\r\n            <TextField\r\n              id=\"connectionMechanism\"\r\n              select\r\n              label=\"Connection mechanism\"\r\n              name=\"connectionMechanism\"\r\n              value={this.state.deviceInfo[columnName]}\r\n              onChange={this.onChangeDiviceInfo}\r\n              required\r\n              fullWidth\r\n            >\r\n              {connectionMechanismList.map((option) => (\r\n                <MenuItem key={option.value} value={option.value}>\r\n                  {option.value}\r\n                </MenuItem>\r\n              ))}\r\n            </TextField>\r\n          </>\r\n        );\r\n        break;\r\n      default:\r\n        result = (\r\n          <>\r\n            <TextField\r\n              margin=\"dense\"\r\n              name={columnName}\r\n              label={this.label[columnName]}\r\n              fullWidth\r\n              required\r\n              onChange={this.onChangeDiviceInfo}\r\n              value={this.state.deviceInfo[columnName]}\r\n            />\r\n          </>\r\n        );\r\n        break;\r\n    }\r\n    return result;\r\n  };\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const {\r\n      name,\r\n      hardwareType,\r\n      interfaceVersion,\r\n      connectionMechanism,\r\n      deviceHolderName\r\n    } = this.state.deviceInfo;\r\n    const deviceInfo = {\r\n      name,\r\n      hardwareType,\r\n      interfaceVersion,\r\n      connectionMechanism,\r\n      deviceHolderName\r\n    };\r\n    console.log(\"connectionMechanism: \", deviceInfo)\r\n    if (this.validateInput(deviceInfo)) {\r\n      notification.error({\r\n        message: \"Error \",\r\n        description: \"Can not edit device\",\r\n      });\r\n      return;\r\n    }\r\n    callApi(`device/${this.props.deviceInfo.name}`, \"PUT\", deviceInfo)\r\n      .then((res) => {\r\n        if (res.status === 200) {\r\n          notification.success({\r\n            message: \"Success\",\r\n            description: \"Edit device successfully!\",\r\n          });\r\n\r\n          this.props.setNeedRefreshDevice(true);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        notification.error({\r\n          message: \"Error \",\r\n          description: error.message,\r\n        });\r\n      });\r\n  };\r\n\r\n  validateInput = (device) => {\r\n    let valid = false;\r\n    //check empty string\r\n    if (device.hardwareType === \"\") {\r\n      valid = true;\r\n    }\r\n    if (device.interfaceVersion === \"\") {\r\n      valid = true;\r\n    }\r\n    if (device.connectionMechanism === \"\") {\r\n      valid = true;\r\n    }\r\n    return valid;\r\n  };\r\n\r\n  onChangeDiviceInfo = (event) => {\r\n    const { name, value } = event.target;\r\n    console.log(\"name: \", name);\r\n    this.setState((prevState) => ({\r\n      deviceInfo: {\r\n        ...prevState.deviceInfo,\r\n        [name]: value,\r\n      },\r\n    }));\r\n  };\r\n\r\n  render() {\r\n    const renderField = this.renderField();\r\n    const name = this.changeName();\r\n    return (\r\n      <div>\r\n        <Dialog\r\n          open={this.props.openDialog}\r\n          onClose={this.props.onCloseDialog}\r\n          aria-labelledby=\"form-dialog-title\"\r\n        >\r\n          <DialogTitle id=\"form-dialog-title\">Edit {name}</DialogTitle>\r\n          <DialogContent>\r\n            <form onSubmit={this.handleSubmit} noValidate autoComplete=\"off\">\r\n              {renderField}\r\n              <DialogActions>\r\n                <Button onClick={this.props.onCloseDialog} color=\"primary\">\r\n                  Cancel\r\n                </Button>\r\n                <Button\r\n                  onClick={this.props.onCloseDialog}\r\n                  variant=\"contained\"\r\n                  type=\"submit\"\r\n                  color=\"primary\"\r\n                >\r\n                  Save\r\n                </Button>\r\n              </DialogActions>\r\n            </form>\r\n          </DialogContent>\r\n        </Dialog>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DialogEdit;\r\n"]},"metadata":{},"sourceType":"module"}